<button [matMenuTriggerFor]="menuProfile" class="relative flex rounded-full bg-card text-sm h-9 w-9" type="button">
  @if(amtMenuService.user()?.photo) {
    <img class="h-9 w-9 rounded-md" [src]="amtMenuService.user()?.photo" [alt]="amtMenuService.user()?.fullName" />
  } @else {
    <div class="rounded-md inline-flex items-center justify-center w-9 h-9  bg-gray-100 dark:bg-gray-600">
      <span class="font-medium text-gray-600 dark:text-gray-300">{{amtMenuService.user()?.initials}}</span>
    </div>
  }
</button>

<mat-menu #menuProfile="matMenu">
  <div class="flex-row flex items-center px-4 pb-4 mt-2 -m-3">
    <div class="w-10 shrink-0">
      @if(amtMenuService.user()?.photo) {
        <img class="h-9 w-9 rounded-md" [src]="amtMenuService.user()?.photo" [alt]="amtMenuService.user()?.fullName" />
      } @else {
        <div class="rounded-md inline-flex items-center justify-center w-9 h-9  bg-gray-100 dark:bg-gray-600">
          <span class="font-medium text-gray-600 dark:text-gray-300">{{amtMenuService.user()?.initials}}</span>
        </div>
      }
    </div>
    <div class="overflow-hidden px-2 text-sm font-semibold text-foreground">
      {{amtMenuService.user()?.fullName}}
      <p class="truncate text-ellipsis text-xs font-semibold text-muted-foreground">{{amtMenuService.user()?.email}}</p>
    </div>
  </div>

  <div class="border-b border-dashed border-border my-2"></div>

  @for (item of amtMenuService.profileMenu(); track item) {
    <button mat-menu-item [routerLink]="item.route" (click)="item.click ? item.click() : null">
      <mat-icon>{{item.icon}}</mat-icon>{{ item.label }}
    </button>
  }
</mat-menu>
